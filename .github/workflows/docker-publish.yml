name: Docker

on:
  push:
    tags:
      - v*
env:
  # TODO: Change variable to your image's name.
  IMAGE_NAME: web

jobs:
  push:
    runs-on: centos-8
    if: github.event_name == 'push'

    steps:
      - uses: actions/checkout@v2

      - name: Install tools
        run: |
          dnf -y install https://rpms.remirepo.net/enterprise/remi-release-8.rpm
          dnf -y module enable php:remi-7.4
          dnf -y install php php-json php-bcmath php-gd php-zip
          php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
          php composer-setup.php --install-dir=/usr/local/bin --filename=composer
          rm -f composer-setup.php
          pwd
          ls -lah

